<html><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=icon href=/images/favicon-96x96.png><link rel=stylesheet type=text/css href="//fonts.googleapis.com/css?family=Open+Sans"><link rel=stylesheet href=/scss/global.min.ae6b060df7a6cc9d3fc742acd2d5dad1ccc9ba6004fb2b70d30d45768e08f41b.css><link rel=stylesheet href=/css/prism.css><link href="https://fonts.googleapis.com/css?family=Merriweather&display=swap" rel=stylesheet><title>Gestion du Server-Side Ad Insertion (SSAI) sur nos chaînes FAST | Blog technique e-TF1</title><meta name=description content="Découvrez comment nous avons mis en place nos chaînes FAST et notre solution SSAI pour y insérer la pub."><meta name=robots content="index, follow"><meta name=google-site-verification content="8mELmXNpnm-09GtDb3i1kq4Jfq_iR94-yqgo5wN9CdY"><meta property="og:title" content="Gestion du Server-Side Ad Insertion (SSAI) sur nos chaînes FAST | Blog technique e-TF1"><meta property="og:site_name" content="Blog technique e-TF1"><meta property="og:description" content="Découvrez comment nous avons mis en place nos chaînes FAST et notre solution SSAI pour y insérer la pub."><meta property="og:url" content="https://tech.tf1.fr/post/2023/pub/streaming-fast-ssai/"><meta property="og:type" content="website"><meta property="og:locale" content="fr_FR"><meta property="og:image" content="https://tech.tf1.fr/post/2023/pub/streaming-fast-ssai/images/hero.jpg"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="Gestion du Server-Side Ad Insertion (SSAI) sur nos chaînes FAST | Blog technique e-TF1"><link rel=canonical href=https://tech.tf1.fr/post/2023/pub/streaming-fast-ssai/><meta name=twitter:description content="Découvrez comment nous avons mis en place nos chaînes FAST et notre solution SSAI pour y insérer la pub."><meta name=twitter:image content="https://tech.tf1.fr/post/2023/pub/streaming-fast-ssai/images/hero.jpg"><meta property="article:published_time" content="2023-11-06T09:00:00+00:00"><meta property="article:updated_time" content="2023-11-06T09:00:00+00:00"><meta property="keywords" content="mytf1, tf1, streaming, player, video, go, golang, react, js, javascript, css, android, ios, kotlin, swift, nginx, drm, widevine, elemental, aws, mongodb, kafka"><link rel=alternate type=application/rss+xml title="Blog technique e-TF1" href=https://tech.tf1.fr/index.xml></head><body class=line-numbers><script src=/js/initColors.js></script><div class=layout-styled><section class=section><div class=nav-container><a class=logo-link href=/><img src=/images/logo-white.svg alt=logo id=logo-desktop>
<span class=header-hidden>Navigate back to the homepage</span></a><div class=nav-controls><button id=copyButton class=icon-wrapper><svg class="icon-image" width="24" height="20" viewBox="0 0 24 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fillRule="evenodd" clipRule="evenodd" d="M2 5C2 3.34328 3.34328 2 5 2h9c1.6567.0 3 1.34328 3 3V9c0 1.6567-1.3433 3-3 3H10C9.44771 12 9 12.4477 9 13S9.44771 14 10 14h4c2.7613.0 5-2.2387 5-5V5c0-2.76128-2.2387-5-5-5H5C2.23872.0.0 2.23872.0 5V9c0 1.4938.656313 2.8361 1.6935 3.7509C2.10768 13.1163 2.73961 13.0767 3.10494 12.6625 3.47028 12.2483 3.43068 11.6164 3.0165 11.2511 2.39169 10.6999 2 9.89621 2 9V5zm5 6c0-1.65672 1.34328-3 3-3h4C14.5523 8 15 7.55228 15 7S14.5523 6 14 6H10C7.23872 6 5 8.23872 5 11v4c0 2.7613 2.23872 5 5 5h9c2.7613.0 5-2.2387 5-5V11C24 9.50621 23.3437 8.16393 22.3065 7.24906 21.8923 6.88372 21.2604 6.92332 20.8951 7.3375 20.5297 7.75168 20.5693 8.38361 20.9835 8.74894 21.6083 9.30007 22 10.1038 22 11v4c0 1.6567-1.3433 3-3 3H10c-1.65672.0-3-1.3433-3-3V11z" fill="#000"/></svg><div id=toolTip class=tool-tip>copied</div><input id=copyText style=opacity:0 type=text class=tool-tip></button>
<button id=themeColorButton class=icon-wrapper><div id=sunRays class=sun-rays></div><div id=moonOrSun class=moon-or-sun></div><div id=moonMask class=moon-mask></div></button></div></div></section><script src=/js/toggleLogos.js></script>
<script src=/js/toggleColors.js></script>
<script src=/js/copyUrl.js></script><section class="section narrow"><section id=articleHero class="section narrow"><div class=article-hero><header class=article-header><h1 class=article-hero-heading>Gestion du Server-Side Ad Insertion (SSAI) sur nos chaînes FAST</h1><div class=article-hero-subtitle><div class=article-meta><a href=/authors/rpinsonneau/ class=article-author-link><div class=article-author-avatar><img src=/authors/rpinsonneau/avatar.jpg></div><strong>Rémy Pinsonneau</strong>
<span class=hide-on-mobile>,&nbsp;</span></a>
<script src=/js/collapseAuthors.js></script>
Publié le 6 novembre 2023 • 13 minutes</div></div></header><div class=article-hero-image id=ArticleImage__Hero><img src=/post/2023/pub/streaming-fast-ssai/images/hero.jpg></div></div></section><aside id=progressBar class=aside-container><div class=aside-align><div><div class=overlap-container></div></div></div><div class=progress-container tabindex={-1}><div class=track-line aria-hidden=true><div id=progressIndicator class=progress-line></div></div></div></aside><article id=articleContent class=post-content style=position:relative><h2 id=chaînes-fast>Chaînes FAST</h2><p>FAST est l&rsquo;acronyme pour <code>Free Ad-supported Streaming Television</code>. Il s&rsquo;agit de chaînes en streaming gratuites avec de la publicité. Le principe est de reprendre des contenus du catalogue TF1, typiquement en AVOD (Advertising Video on Demand) et de l&rsquo;assembler pour constituer une grille de programmation qui alimentera une chaîne live. C&rsquo;est le principe de Stream sur <a href=https://www.tf1.fr/tf1/direct>MYTF1</a>. On parle alors de re-linéarisation des contenus.</p><h3 id=mise-en-oeuvre-des-flux-origin>Mise en oeuvre des flux origin</h3><p>eTF1 assure le delivery des contenus VOD en <a href=https://developer.apple.com/streaming/>HLS</a> (HTTP Live Streaming) et <a href=https://dashif.org/>DASH</a> (Dynamic Adaptive Streaming over HTTP). Si vous ne l&rsquo;avez pas déjà lu, nous avons écrit <a href=https://tech.tf1.fr/post/2020/architecture/video/>un article sur notre architecture vidéo</a>.</p><p>Afin de déployer nos chaînes FAST nous avons développé une brique maison &ldquo;vod2live&rdquo; qui permet de générer des flux live à partir de contenus VOD.</p><p>DASH et HLS sont deux formats de streaming vidéo qui permettent à un player de connaître les segments vidéo/audio (chunks) à télécharger pour lire un contenu. Le découpage en segment permet la lecture en streaming, le fait qu&rsquo;il existe différents variants (bitrate / résolution) permet au player de faire de l&rsquo;adaptation de la qualité à la bande passante réseau disponible (adaptative bitrate) ou de choisir le variant le plus adapté selon le CPU disponible ainsi que la taille de l&rsquo;écran du device.</p><p>Dans un contexte VOD, l&rsquo;ensemble des segments est connu dès l&rsquo;initialisation du player. Dans un contexte live, le player recharge régulièrement la playlist HLS ou le manifest DASH pour avoir connaissance des segments à venir : il s&rsquo;agit d&rsquo;une fenêtre glissante, les segments trop anciens disparaissent et les nouveaux segments sont ajoutés.</p><p>La fenêtre DVR (Digital Video Recorder) est l&rsquo;intervalle de temps dans lequel le player pourra positionner sa tête de lecture pour jouer le live, soit au plus proche du direct, soit avec un décalage (en timeshifting). Un délais est toujours présent pour garantir un buffer minimal.</p><p><img src=images/dvr.drawio.svg#darkmode alt=DVR title="time window"></p><p>Le rôle de la brique vod2live est donc à partir d&rsquo;une grille de programme de déterminer en fonction de l&rsquo;heure courante la liste des segments à présenter au player.</p><p>Une grille de programme peut être générée de plusieurs façons :</p><ul><li>manuellement : chaque programme est positionné sur une grille</li><li>automatiquement : une liste de programme est déterminée et boucle à l&rsquo;infini à partir du démarrage de la chaîne</li></ul><p>Cette seconde option est la plus simple à gérer car elle demande moins d&rsquo;effort sur la programmation des chaînes. À partir d&rsquo;une liste de vidéos ordonnées, de leur durée et de la date de démarrage de la boucle on peut déterminer à chaque instant (à l&rsquo;aide de modulo) :</p><ul><li>l&rsquo;index de la boucle courante</li><li>l&rsquo;index du programme courant</li><li>l&rsquo;index du segment correspondant</li></ul><p><img src=images/vod2live-dvr.drawio.svg#darkmode alt="vod2live DVR" title="vod2live loops"></p><p>Dans l&rsquo;exemple ci-dessus, on est sur la première boucle de la chaîne. Le premier segment de la fenêtre tombe sur le deuxième segment de la première vidéo et la fin de la fenêtre tombe sur le premier segment de la deuxième vidéo.</p><h3 id=architecture-de-la-brique-vod2live>Architecture de la brique VOD2LIVE</h3><p><img src=images/archi-vod2live.drawio.svg#darkmode alt=architecture title=schema></p><p>Afin de générer les flux DASH / HLS de nos chaînes FAST, vod2live est interfacé à plusieurs systèmes :</p><ul><li>l&rsquo;<code>enhancer</code> est une brique interne qui permet de construire une vue consolidée des chaînes, sa date de démarrage, la liste ordonnée des vidéos qui la compose et leurs durées, ce qui permet de calculer la grille à tout instant</li><li>l&rsquo;<a href=https://www.unified-streaming.com/products/unified-packager><code>USP (Unified Streaming Packager)</code></a> est la solution de packaging vidéo que nous utilisons et permet de générer à la volée les manifests DASH et playlist HLS des VOD sources</li><li>les briques <code>delivery</code> et <code>mediainfo</code> permettent au player de récupérer une URL sécurisée de chaque flux</li></ul><p><img src=images/vod2live-seq-diag.drawio.svg#darkmode alt="sequence diagram" title=schema></p><p>Pour générer un manifest DASH ou une playlist HLS, la brique vod2live effectue les tâches suivantes :</p><ol><li>récupération de la définition de la chaîne et calcul de la grille</li><li>calcul du ou des programmes inclus dans la fenêtre DVR actuelle</li><li>chargement des manifests DASH / playlist HLS des vidéos concernées</li><li>calcul des segments à inclure dans la fenêtre DVR et génération d&rsquo;un manifest DASH ou playlist HLS</li></ol><h3 id=manipulation-des-manifests-dash>Manipulation des manifests DASH</h3><p>La génération d&rsquo;un flux live DASH à partir de manifest provenant de VOD est relativement facile si l&rsquo;on s&rsquo;appuie sur le concept de <a href=https://dashif-documents.azurewebsites.net/DASH-IF-IOP/master/DASH-IF-IOP.html#periods>periods</a>.</p><p>En effet, un manifest DASH ou fichier MPD (Media Presentation Description) est constitué d&rsquo;une ou plusieurs périodes.</p><p><img src=images/PeriodsMakeTheMpd.png#darkmode alt=PeriodsMakeTheMpd title="MPD periods"></p><p>Dans un MPD, chaque période de la <a href=https://dashif-documents.azurewebsites.net/Guidelines-TimingModel/master/Guidelines-TimingModel.html#mpd-general-timeline>timeline</a> correspond à une source (encodage) et contient elle même les éléments qui encapsulent les segments vidéo et audio pour les différents variants. On peut donc lire séquentiellement plusieurs VOD dans un manifest.</p><p><img src=images/BasicMpdElements.png#darkmode alt=BasicMpdElements title="MPD elements"></p><p>Ci-dessous, un exemple très allégé de MPD live constitué de deux périodes :</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;MPD</span> <span style=color:#a6e22e>xmlns=</span><span style=color:#e6db74>&#34;urn:mpeg:dash:schema:mpd:2011&#34;</span> <span style=color:#a6e22e>type=</span><span style=color:#e6db74>&#34;dynamic&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>availabilityStartTime=</span><span style=color:#e6db74>&#34;2017-12-02T09:35:00Z&#34;</span> <span style=color:#a6e22e>timeShiftBufferDepth=</span><span style=color:#e6db74>&#34;PT400S&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;Period&gt;</span>
</span></span><span style=display:flex><span>    ...
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;/Period&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;Period</span> <span style=color:#a6e22e>start=</span><span style=color:#e6db74>&#34;PT300S&#34;</span> <span style=color:#a6e22e>duration=</span><span style=color:#e6db74>&#34;PT300S&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>    ...
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;/Period&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/MPD&gt;</span>
</span></span></code></pre></div><p>Le flux live commence à la date indiquée par l&rsquo;attribut &ldquo;availabilityStartTime&rdquo;. Les différentes périodes qui le composent sont positionnées de façon relative par rapport à cette date absolue grâce à leur attribut &ldquo;start&rdquo;. La première période commence donc à cette date (start=&ldquo;PT0S&rdquo; par défaut), la deuxième période commence 300s après la première période, qui à donc une durée de 300s. La deuxième période a également une durée de 300s.</p><p>La valeur de l&rsquo;attribut &ldquo;timeShiftBufferDepth&rdquo; indique une fenêtre de DVR de 400s.
Si la date courante est &ldquo;2017-12-02T09:45:00Z&rdquo; soit 600s (la durée des deux périodes) de plus que &ldquo;availabilityStartTime&rdquo; alors notre fenêtre DVR commence à 200s de la première période.</p><p>Vous l&rsquo;avez compris, pour générer le flux live, il faut recopier dans un nouveau MPD les périodes des VOD correspondantes à la DVR courante en adaptant la timeline DASH.</p><p>Il est également nécessaire d&rsquo;adapter les SegmentTimeline dans le cas d&rsquo;<a href=https://dashif-documents.azurewebsites.net/Guidelines-TimingModel/master/Guidelines-TimingModel.html#addressing-explicit>adressage explicite</a>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;MPD</span> <span style=color:#a6e22e>xmlns=</span><span style=color:#e6db74>&#34;urn:mpeg:dash:schema:mpd:2011&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;Period</span> <span style=color:#a6e22e>duration=</span><span style=color:#e6db74>&#34;PT900S&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;AdaptationSet&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;Representation&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;SegmentTemplate</span> <span style=color:#a6e22e>timescale=</span><span style=color:#e6db74>&#34;1000&#34;</span> <span style=color:#a6e22e>presentationTimeOffset=</span><span style=color:#e6db74>&#34;902&#34;</span>
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>media=</span><span style=color:#e6db74>&#34;video/$Time$.m4s&#34;</span> <span style=color:#a6e22e>initialization=</span><span style=color:#e6db74>&#34;video/init.mp4&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>&lt;SegmentTimeline&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;S</span> <span style=color:#a6e22e>t=</span><span style=color:#e6db74>&#34;900&#34;</span> <span style=color:#a6e22e>d=</span><span style=color:#e6db74>&#34;4001&#34;</span> <span style=color:#a6e22e>r=</span><span style=color:#e6db74>&#34;224&#34;</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;S</span> <span style=color:#a6e22e>t=</span><span style=color:#e6db74>&#34;900225&#34;</span> <span style=color:#a6e22e>d=</span><span style=color:#e6db74>&#34;1775&#34;</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>&lt;/SegmentTimeline&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;/SegmentTemplate&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;/Representation&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/AdaptationSet&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;/Period&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/MPD&gt;</span>
</span></span></code></pre></div><ul><li>timescale > nombre d&rsquo;unité de temps pour une seconde</li><li><code>S.t</code> : offset du segment exprimé en unité de timescale (soit 0,9s)</li><li><code>S.d</code> : durée du segment exprimé en unité de timescale</li><li><code>S.r</code> : nombre de segment similaire consécutifs</li></ul><p>L&rsquo;url des segments est déduite par le player à partir du template &ldquo;video/$Time$.m4s&rdquo;, ici &ldquo;$Time$&rdquo; est remplacé par l&rsquo;offset &ldquo;S.t&rdquo; du segment correspondant.</p><p>Afin d&rsquo;inclure les bon segments dans notre fenêtre DVR, il faut adapter les &ldquo;S.t&rdquo;, &ldquo;S.r&rdquo; du &ldquo;SegmentTimeLine&rdquo;.</p><h3 id=manipulation-des-playlist-hls>Manipulation des playlist HLS</h3><p>La génération d&rsquo;un flux HLS est beaucoup plus simple qu&rsquo;en DASH. En HLS, il existe une playlist pour chaque variant audio/vidéo. Une playlist est un fichier <a href=https://fr.wikipedia.org/wiki/M3U>m3u8</a> qui contient la liste des segments de la DVR.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e>#EXTM3U</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#EXT-X-VERSION:6</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#EXT-X-MEDIA-SEQUENCE:206756</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#EXT-X-TARGETDURATION:8</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#EXT-X-DISCONTINUITY-SEQUENCE:1737</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#EXTINF:8.000, no desc</span>
</span></span><span style=display:flex><span>../videoA-126.ts
</span></span><span style=display:flex><span><span style=color:#75715e>#EXTINF:8.000, no desc</span>
</span></span><span style=display:flex><span>../videoA-127.ts
</span></span><span style=display:flex><span><span style=color:#75715e>#EXT-X-DISCONTINUITY</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#EXTINF:8.000, no desc</span>
</span></span><span style=display:flex><span>../videoB-1.ts
</span></span><span style=display:flex><span><span style=color:#75715e>#EXTINF:8.000, no desc</span>
</span></span><span style=display:flex><span>../videoB-2.ts
</span></span></code></pre></div><p>L&rsquo;attribut &ldquo;EXTINF&rdquo; indique la durée des segments (ici 8s). Pour enchaîner deux VOD distinctes, l&rsquo;attribut &ldquo;EXT-X-DISCONTINUITY&rdquo; permet d&rsquo;indiquer au player une discontinuité dans l&rsquo;encodage de deux segments successifs.</p><p>Il suffit alors de lister explicitement les segments des VOD en plaçant les tags #EXT-X-DISCONTINUITY entre les VOD.</p><p>Il est également nécessaire de tenir à jour les valeurs des attributs #EXT-X-MEDIA-SEQUENCE et #EXT-X-DISCONTINUITY-SEQUENCE.</p><ul><li><code>#EXT-X-MEDIA-SEQUENCE</code> : doit être incrémenté à chaque fois qu&rsquo;un segment disparait de la playlist</li><li><code>#EXT-X-DISCONTINUITY-SEQUENCE</code> : doit être incrémenté à chaque fois qu&rsquo;un segment en discontinuité disparait de la playlist</li></ul><p>Il y a cependant un prérequis fort sur HLS, les contenus doivent tous avoir exactement le même nombre de variants (une seule master playlist pour le flux). Sans cela, la jonction entre les VOD n&rsquo;est pas possible si un variant n&rsquo;existe plus sur le contenu suivant, le player plante et s&rsquo;arrête.</p><h2 id=insertion-des-publicités>Insertion des publicités</h2><p>Pour l&rsquo;insertion des publicités dans le flux vidéo des chaînes FAST il est nécessaire d&rsquo;ajouter des emplacements prévus à cet effet. La publicité n&rsquo;étant pas la même pour chaque utilisateur (ciblage, état de l&rsquo;inventaire disponible sur l&rsquo;ad server), la durée des tunnels de publicité (ad break) peut être très variable. Cela n&rsquo;est pas gênant en VOD, mais sur une chaîne live, cela peut induire un décalage trop important par rapport à la grille de programmation. Afin d&rsquo;éviter ce décalage, des emplacements sont ajoutés dans la grille de programme. Ces emplacements correspondent à des vidéos (ad slate) qui seront remplacées par la publicité.</p><p><img src=images/adslates.drawio.svg#darkmode alt=adslates title="ad slates"></p><p>Dans l&rsquo;exemple ci-dessus, le premier ad slate est remplacé par trois spots publicitaire, la durée totale des spots est égale à celui de l&rsquo;ad slate.</p><p>Le deuxième ad slate lui n&rsquo;est remplacé que par un seul spot (manque d&rsquo;inventaire sur l&rsquo;ad server). Dans ce cas, pour éviter de créer un décalage dans le flux, une partie de l&rsquo;ad slate vient compléter le spot pour que la durée totale soit équivalente à celle de l&rsquo;ad slate initial.</p><p>Dans le flux vidéo d&rsquo;origine, des marqueurs <a href=https://www.scte.org/standards/library/catalog/scte-35-digital-program-insertion-cueing-message/>SCTE35</a> sont ajoutés pour indiquer les emplacements où des opportunités publicitaire sont possibles ainsi que leur durée.</p><p>À noter également, pour insérer de la publicité au milieu d&rsquo;un contenu, il est nécessaire de le couper en deux parties. Cela est possible en DASH ou HLS à condition que le point de jonction corresponde au début d&rsquo;un segment. Afin que le packager puisse créer un segment à une frame précise, il est nécessaire de forcer un GOP (Group Of Picture) au niveau de l&rsquo;encoder afin de tomber sur une frame I. En général, ce comportement est assuré par la présence de marqueur SCTE35 dans la source VOD. À default d&rsquo;avoir correctement préparer les contenus, la publicité ne pourra être insérée qu&rsquo;à la jonction des deux segments les plus proches de la frame désirée.</p><h3 id=architecture-de-la-brique-adback>Architecture de la brique adback</h3><p>Pour insérer les publicités dans nos flux FAST, nous avons développé une solution SSAI (Server Side Ad Insertion) maison, nommée &ldquo;adback&rdquo;.</p><p><img src=images/archi-adback.drawio.svg#darkmode alt=architecture title=schema></p><p>Adback est interfacé à plusieurs systèmes :</p><ul><li><code>vod2live</code> : qui permet de récupérer le flux préparé avec des ad slates et marqueur SCTE35</li><li><code>wizads</code> : une brique interne qui proxifie les appels avec notre ad server (Freewheel)</li><li><code>C3PO</code> : un référentiel de publicités connues de notre delivery vidéo</li><li><code>video wf</code> : notre workflow d&rsquo;encodage & packaging, il est sollicité par C3PO pour mettre à disposition les spots publicitaires</li><li>l&rsquo;<code>[USP](https://www.unified-streaming.com/products/unified-packager)</code> : la solution de packaging vidéo que nous utilisons et permet de générer à la volée les manifests DASH et playlist HLS des spots publicitaires (c&rsquo;est la même brique qui est utilisée par vod2live)</li></ul><p><img src=images/adback-seq-diag.drawio.svg#darkmode alt="sequence diagram" title=schema></p><p>Pour insérer les spots publicitaire, la brique adback effectue les tâches suivantes :</p><ol><li><code>Adback</code> : récupération du manifest DASH ou playlist HLS du contenu, préparé avec les ad slates & marqueur SCTE35 par vod2live</li><li><code>Wizads</code> : sur présence de marqueur SCTE35, appel à l&rsquo;ad server Freewheel pour récupérer la liste de publicités du tunnel (format VAST, cf. ci-dessous), la durée du tunnel est extraite du marqueur SCTE35 et indiqué à l&rsquo;ad server</li><li><code>C3PO</code> : les publicités qui ne sont pas déjà connues font l&rsquo;objet d&rsquo;une demande d&rsquo;encodage asynchrone à notre workflow vidéo, les publicités déjà encodées sont conservées dans le VAST retourné par Wizads</li><li><code>Adback</code> : les manifests DASH ou playlist HLS du contenu et des pubs permettent après re-manipulation de générer le flux live, le tunnel est persisté en session pour chaque utilisateur</li></ol><h3 id=template-vast>Template VAST</h3><p>Ci-dessous, un exemple de template VAST avec un spot publicitaire :</p><p><a href=https://www.iab.com/guidelines/vast/>VAST</a> est le format utilisé pour récupérer de l&rsquo;ad server la liste des spots publicitaires pour un tunnel.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;VAST</span> <span style=color:#a6e22e>version=</span><span style=color:#e6db74>&#34;4.2&#34;</span> <span style=color:#a6e22e>xmlns:xs=</span><span style=color:#e6db74>&#34;http://www.w3.org/2001/XMLSchema&#34;</span> <span style=color:#a6e22e>xmlns=</span><span style=color:#e6db74>&#34;http://www.iab.com/VAST&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;Ad</span> <span style=color:#a6e22e>id=</span><span style=color:#e6db74>&#34;20001&#34;</span> <span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;InLine&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;AdSystem</span> <span style=color:#a6e22e>version=</span><span style=color:#e6db74>&#34;1&#34;</span><span style=color:#f92672>&gt;</span>iabtechlab<span style=color:#f92672>&lt;/AdSystem&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;Error&gt;</span><span style=color:#75715e>&lt;![CDATA[https://example.com/error]]&gt;</span><span style=color:#f92672>&lt;/Error&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;Impression</span> <span style=color:#a6e22e>id=</span><span style=color:#e6db74>&#34;Impression-ID&#34;</span><span style=color:#f92672>&gt;</span><span style=color:#75715e>&lt;![CDATA[https://example.com/track/impression]]&gt;</span><span style=color:#f92672>&lt;/Impression&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;AdServingId&gt;</span>a532d16d-4d7f-4440-bd29-2ec05553fc80<span style=color:#f92672>&lt;/AdServingId&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;AdTitle&gt;</span>Inline Simple Ad<span style=color:#f92672>&lt;/AdTitle&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;AdVerifications&gt;&lt;/AdVerifications&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;Advertiser&gt;</span>IAB Sample Company<span style=color:#f92672>&lt;/Advertiser&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;Category</span> <span style=color:#a6e22e>authority=</span><span style=color:#e6db74>&#34;https://www.iabtechlab.com/categoryauthority&#34;</span><span style=color:#f92672>&gt;</span>AD CONTENT description category<span style=color:#f92672>&lt;/Category&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;Creatives&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;Creative</span> <span style=color:#a6e22e>id=</span><span style=color:#e6db74>&#34;5480&#34;</span> <span style=color:#a6e22e>sequence=</span><span style=color:#e6db74>&#34;1&#34;</span> <span style=color:#a6e22e>adId=</span><span style=color:#e6db74>&#34;2447226&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>&lt;Linear&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;TrackingEvents&gt;</span>
</span></span><span style=display:flex><span>              <span style=color:#f92672>&lt;Tracking</span> <span style=color:#a6e22e>event=</span><span style=color:#e6db74>&#34;firstQuartile&#34;</span><span style=color:#f92672>&gt;</span><span style=color:#75715e>&lt;![CDATA[https://example.com/tracking/firstQuartile]]&gt;</span><span style=color:#f92672>&lt;/Tracking&gt;</span>
</span></span><span style=display:flex><span>              <span style=color:#f92672>&lt;Tracking</span> <span style=color:#a6e22e>event=</span><span style=color:#e6db74>&#34;midpoint&#34;</span><span style=color:#f92672>&gt;</span><span style=color:#75715e>&lt;![CDATA[https://example.com/tracking/midpoint]]&gt;</span><span style=color:#f92672>&lt;/Tracking&gt;</span>
</span></span><span style=display:flex><span>              <span style=color:#f92672>&lt;Tracking</span> <span style=color:#a6e22e>event=</span><span style=color:#e6db74>&#34;thirdQuartile&#34;</span><span style=color:#f92672>&gt;</span><span style=color:#75715e>&lt;![CDATA[https://example.com/tracking/thirdQuartile]]&gt;</span><span style=color:#f92672>&lt;/Tracking&gt;</span>
</span></span><span style=display:flex><span>              <span style=color:#f92672>&lt;Tracking</span> <span style=color:#a6e22e>event=</span><span style=color:#e6db74>&#34;complete&#34;</span><span style=color:#f92672>&gt;</span><span style=color:#75715e>&lt;![CDATA[https://example.com/tracking/complete]]&gt;</span><span style=color:#f92672>&lt;/Tracking&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;/TrackingEvents&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;Duration&gt;</span>00:00:16<span style=color:#f92672>&lt;/Duration&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;MediaFiles&gt;</span>
</span></span><span style=display:flex><span>              <span style=color:#f92672>&lt;MediaFile</span> <span style=color:#a6e22e>id=</span><span style=color:#e6db74>&#34;5241&#34;</span> <span style=color:#a6e22e>delivery=</span><span style=color:#e6db74>&#34;progressive&#34;</span> <span style=color:#a6e22e>type=</span><span style=color:#e6db74>&#34;video/mp4&#34;</span> <span style=color:#a6e22e>bitrate=</span><span style=color:#e6db74>&#34;2000&#34;</span> <span style=color:#a6e22e>width=</span><span style=color:#e6db74>&#34;1280&#34;</span> <span style=color:#a6e22e>height=</span><span style=color:#e6db74>&#34;720&#34;</span> <span style=color:#a6e22e>minBitrate=</span><span style=color:#e6db74>&#34;1500&#34;</span> <span style=color:#a6e22e>maxBitrate=</span><span style=color:#e6db74>&#34;2500&#34;</span> <span style=color:#a6e22e>scalable=</span><span style=color:#e6db74>&#34;1&#34;</span> <span style=color:#a6e22e>maintainAspectRatio=</span><span style=color:#e6db74>&#34;1&#34;</span> <span style=color:#a6e22e>codec=</span><span style=color:#e6db74>&#34;H.264&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>                <span style=color:#75715e>&lt;![CDATA[https://iab-publicfiles.s3.amazonaws.com/vast/VAST-4.0-Short-Intro.mp4]]&gt;</span>
</span></span><span style=display:flex><span>              <span style=color:#f92672>&lt;/MediaFile&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;/MediaFiles&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;VideoClicks&gt;</span>
</span></span><span style=display:flex><span>              <span style=color:#f92672>&lt;ClickThrough</span> <span style=color:#a6e22e>id=</span><span style=color:#e6db74>&#34;blog&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>                <span style=color:#75715e>&lt;![CDATA[https://iabtechlab.com]]&gt;</span>
</span></span><span style=display:flex><span>              <span style=color:#f92672>&lt;/ClickThrough&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;/VideoClicks&gt;</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>&lt;/Linear&gt;</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>&lt;UniversalAdId</span> <span style=color:#a6e22e>idRegistry=</span><span style=color:#e6db74>&#34;Ad-ID&#34;</span><span style=color:#f92672>&gt;</span>8465<span style=color:#f92672>&lt;/UniversalAdId&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;/Creative&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;/Creatives&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/InLine&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;/Ad&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/VAST&gt;</span>
</span></span></code></pre></div><p>On retrouve les différents trackings à exécuter :</p><ul><li>le tracking d&rsquo;impression, si affichage de la PUB</li><li>le tracking d&rsquo;erreur, si la PUB n&rsquo;a pu être insérée</li><li>&ldquo;firstQuartile&rdquo;, &ldquo;midpoint&rdquo;, &ldquo;thirdQuartile&rdquo;, &ldquo;complete&rdquo; : selon l&rsquo;avancement de lecture du spot</li></ul><p>On trouve aussi l&rsquo;url du spot de PUB dans la balise &ldquo;MediaFile&rdquo; au format MP4 dans le retour Freewheel, réécrit ensuite en DASH et HLS suite à la réécriture de Wizads / C3PO.</p><h3 id=manipulation-des-manifests-dash-1>Manipulation des manifests DASH</h3><p>Pour réaliser l&rsquo;insertion des spots en DASH, il est nécessaire de tronquer la période d&rsquo;ad slate qui sert de filler si la durée de la publicité est inférieure à la durée de l&rsquo;ad slate initial.</p><p>Pour ce faire, il faut modifier la valeur du champ &ldquo;presentationTimeOffset&rdquo; du SegmentTemplate comme expliqué <a href=https://dashif-documents.azurewebsites.net/DASH-IF-IOP/master/DASH-IF-IOP.html#addressing-explicit-startpoint>ici</a>.</p><p>La durée de l&rsquo;ad slate tronqué doit être égale à : &ldquo;durée ad slate initiale&rdquo; - &ldquo;durée tunnel de PUB&rdquo;. La durée du tunnel de publicité est inférieure à l&rsquo;ad slate, l&rsquo;ad server reçoit un paramètre pour garantir ce comportement. Autrement, les spots en trop sont ignorés.</p><p>Il y a cependant une contrainte forte, le redimensionnement consiste à supprimer un certain nombre de segments de l&rsquo;ad slate, mais on ne pourra pas toujours avoir la durée voulue exacte. On ne peut que prendre la jonction de deux segments la plus proche.</p><p><img src=images/adslate-cut.drawio.svg#darkmode alt=adslates-cut title="ad slates cut"></p><p>Cette contrainte amène une deuxième contrainte, si le remplacement de l&rsquo;adslate initial par la PUB + l&rsquo;ad slate tronqué ne fait pas la même durée, cela va décaler les &ldquo;start&rdquo; de toutes les périodes suivantes. Il est donc nécessaire de garder une session pour chaque utilisateur pour tenir compte de ce décalage.</p><p>Une troisième contrainte vient s&rsquo;ajouter, si dans une session de lecture, un grand nombre de tunnel de publicité induit un décalage trop important, la tête de lecture du player peut être amenée à sortir de la fenêtre DVR. Pour pallier cette dernière contrainte, il est important d&rsquo;avoir une fenêtre DVR suffisamment grande, et de limiter les décalages au minimum en ayant des segments plus petits sur l&rsquo;ad slate.</p><h3 id=manipulation-des-playlist-hls-1>Manipulation des playlist HLS</h3><p>Il n&rsquo;y a pas de complexité particulière sur HLS, il suffit de remplacer les segments de l&rsquo;ad slate par ceux des spots de PUB en respectant bien la déclaration des discontinuités. Les mêmes contraintes qu&rsquo;en DASH s&rsquo;appliquent sur le découpage au niveau des segment et la fenêtre DVR.</p><h3 id=tracking-des-publicités>Tracking des publicités</h3><p><img src=images/adback-trackings.drawio.svg#darkmode alt=trackings title=trackings></p><p>Le tracking des publicités se fait en server side, lors de la génération du flux live. Les URLs des segments de spot publicitaire sont remplacées par une URL qui pointera sur la brique Adback.</p><p>Dans cette URL sont inclus :</p><ul><li>l&rsquo;id de session de l&rsquo;utilisateur</li><li>l&rsquo;id du tunnel publicitaire (identifié à l&rsquo;aide du marqueur SCTE35)</li><li>l&rsquo;id du spot concerné</li><li>l&rsquo;index du segment</li></ul><p>L&rsquo;index du segment permet à la brique adback de déterminer la progression dans le spot et de déterminer les quartiles à déclencher (&ldquo;firstQuartile&rdquo;, &ldquo;midpoint&rdquo;, &ldquo;thirdQuartile&rdquo;, &ldquo;complete&rdquo;).</p><p>Adback pourra alors envoyer le ou les trackings adéquats en asynchrone et renvoyer une redirection (status code 302) vers le contenu du segment au player qui pourra télécharger celui-ci.</p><p>Ce mode de tracking crée une imprécision sur les quartiles car les trackings sont exécutés au téléchargement des segments et non à la lecture réelle du player. Selon la taille du buffer du player un écart plus ou moins important peut exister.</p><p>Il donne également moins de possibilités de mesures pour les annonceurs qui souhaiteraient contrôler plus finement leur campagne (cf. <a href=https://iabtechlab.com/standards/open-measurement-sdk/>Open Measurement SDK</a>).</p><p>L&rsquo;avantage d&rsquo;un tracking server side est qu&rsquo;il ne necéssite pas de développement dans le player pour être mis en place et facilite la mise à disposition des flux FAST à des partenaires pour lesquels le player n&rsquo;est pas maîtrisé.</p><h2 id=conclusion>Conclusion</h2><p>Il existe une multitude de solutions SSAI sur le marché. Plusieurs acteurs permettent également de gérer des chaînes FAST. eTF1 opère sa propre plateforme vidéo, dans notre contexte, il était pertinent de gérer nous même la delivery de ces chaînes et leur planification.</p><p>Les manipulations de manifest DASH ou playlist HLS nécessaires à la mise en place des chaînes FAST ne sont pas si complexes.</p><p>L&rsquo;insertion publicitaire est plus complexe, elle exige de maintenir une session pour chaque utilisateur :</p><ul><li>pour gérer le décalage des périodes DASH</li><li>pour conserver les publicités d&rsquo;un utilisateur pour chaque tunnel (le manifest est rechargé régulièrement par le player en live)</li><li>pour gérer les trackings sur les segments des spots publicitaires</li></ul><p>Nous opérons actuellement une soixantaine de flux FAST. Notre solution &ldquo;maison&rdquo; permet en quelque clics dans notre <a href=https://fr.wikipedia.org/wiki/Syst%C3%A8me_de_gestion_de_contenu>CMS</a> la publication d&rsquo;une nouvelle chaîne avec la possibilité de gérer la pression publicitaire (durée et fréquence des ad slates).</p></article><section id=articleNext class="section nartrow"><h3 class=footer-next-heading>Plus d'articles</h3><div class=footer-spacer></div><div class=next-articles-grid numberofarticles={numberOfArticles}><div class=post-row><a href=/post/2023/architecture/workflow-video-avec-temporal/ class=article-link id=article-link-bigger><div><div class=image-container><img src=/post/2023/architecture/workflow-video-avec-temporal/images/hero.jpg class=article-image></div><div><h2 class=article-title>Workflow d'encodage et delivery vidéo avec Temporal</h2><p class=article-excerpt>Découvrez comment nous avons mis en place notre nouveau workflow d'encodage et de delivery vidéo avec Temporal.</p><div class=article-metadata>23 juillet 2023 • 12 minutes</div></div></div></a><a href=/post/2023/cdm/ class=article-link><div><div class=image-container><img src=https://photos.tf1.fr/1280/0/cover-hp-ott-135c2c-26558e-0@1x.png class=article-image></div><div><h2 class=article-title>Coupe du Monde : dans les coulisses de MYTF1</h2><p class=article-excerpt>De l’architecture applicative aux CDN en passant par la sécurité, la Coupe du Monde a mis à l’épreuve tous les pans de l’infrastructure de MYTF1.</p><div class=article-metadata>17 mars 2023 • 8 minutes</div></div></div></a></div></div></section></section><script src=/js/progressBar.js></script><div class=footer-gradient></div><div class="section narrow"><div class=footer-hr></div><div class=footer-container><div class=footer-text><img src=/images/logo_tf1lg.png class=footer-logo>TF1 Copyright © 2024 e-TF1</div><div class=social-icon-outer><div class=social-icon-container><a href=https://www.welcometothejungle.com/fr/companies/groupe-tf1><svg class="social-icon-image" viewBox="7 7 26 26" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" alt="Rejoingez nous !" title="Rejoignez nous !"><path d="M31.347322 11.295661C30.1466441 9.31125424 26.6585085 8.44345763 24.1202034 11.0048136 23.9785085 11.1532881 23.7913898 11.6054915 24.3554576 12.2149831c1.181017 1.258305 7.340339 7.7179661 5.0616949 13.36-1.1071186 2.7430508-4.2555932 2.2705084-5.438644-2.2738984C23.4991864 21.4590508 22.7595254 17.6326102 23.468678 13.0393898 23.468678 13.0393898 23.5818983 12.6082034 23.3995254 12.4705763 23.2734237 12.3743051 23.0707119 12.4143051 22.8103729 12.8312542 22.7452881 12.936339 22.7588475 12.9146441 22.6964746 13.0265085L22.6924068 13.0285424c-1.7457627 2.9444068-3.5220339 6.4352542-4.3579661 7.7444068C18.7425763 18.7980339 18.2252881 16.0814237 17.4185085 13.8075254L17.2666441 13.396678C16.5215593 11.4515932 15.6259661 10.1390508 15.3541017 9.84142373 15.3215593 9.80549153 15.2408814 9.73837288 14.9744407 9.73837288H7.42461017c-.528135590000001.0-.4820339.45220342-.31525424.615593219999999 2.00474576 2.3857627 7.84610167 11.3294915 5.13762717 20.1064407C12.0381695 31.1390508 12.3663051 31.4949831 12.9066441 30.7946441c2.3742373-3.0772882 5.32-8.3227119 7.4542373-12.2542373C19.8903729 19.9037966 19.4761356 21.4217627 19.2544407 23.0122712c-.4677966 3.3572881.5247457 5.8827119 1.2508474 7.2081356C20.8768136 30.8990508 21.3696949 31.3139661 22.6456271 31.1241356c6.5071187-.9694915 8.6772882-6.7016949 9.4786441-9.6088136C33.5852881 16.215661 32.5154576 13.2258305 31.347322 11.295661" id="monogram" fill="#000"/></svg></a><span class=hidden>https://www.welcometothejungle.com/fr/companies/groupe-tf1</span>
<a href=https://www.linkedin.com/company/e-tf1/><svg class="social-icon-image" width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg"><path fillRule="evenodd" clipRule="evenodd" d="M3.59615 13.125H.871552V4.36523H3.59615V13.125zM2.24847 3.16406c-.42969.0-.80078-.15625-1.11328-.46875-.312498-.3125-.468747-.6836-.468747-1.11328.0-.42969.156249-.800782.468747-1.113281C1.44769.156249 1.81878.0 2.24847.0s.80078.156249 1.11328.468749c.3125.312499.46875.683591.46875 1.113281.0.42968-.15625.80078-.46875 1.11328s-.68359.46875-1.11328.46875zM13.7915 13.125H11.0669V8.84765C11.0669 8.14452 11.0083 7.63671 10.8911 7.32421c-.2148-.52734-.6348-.79101-1.25976-.79101-.625.0-1.06445.23437-1.31836.70312C8.11767 7.58788 8.02001 8.10546 8.02001 8.78905V13.125H5.32471V4.36523H7.93212V5.5664H7.96142C8.15673 5.17578 8.46923 4.85351 8.89892 4.59961c.46875-.3125 1.01562-.46875 1.64058-.46875 1.2696.0 2.1582.40039 2.666 1.20117C13.5962 5.97656 13.7915 6.97265 13.7915 8.3203V13.125z" fill="#73737d"/></svg></a><span class=hidden>https://www.linkedin.com/company/e-tf1/</span>
<a href=https://github.com/etf1><svg class="social-icon-image" width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg"><path fillRule="evenodd" clipRule="evenodd" d="M7 0C3.1325.0.0 3.21173.0 7.17706.0 10.3529 2.00375 13.0353 4.78625 13.9863 5.13625 14.0491 5.2675 13.8338 5.2675 13.6454 5.2675 13.4749 5.25875 12.9097 5.25875 12.3087 3.5 12.6406 3.045 11.8691 2.905 11.4653 2.82625 11.259 2.485 10.622 2.1875 10.4516 1.9425 10.317 1.5925 9.98508 2.17875 9.97611 2.73 9.96714 3.12375 10.4964 3.255 10.7118c.63 1.0855 1.63625.7805 2.03875.5921C5.355 10.8374 5.53875 10.5234 5.74 10.3439 4.1825 10.1645 2.555 9.54549 2.555 6.80026c0-.7805.27125-1.42644.7175-1.92883C3.2025 4.692 2.9575 3.95635 3.3425 2.96951c0 0 .58625-.1884 1.925.73565.56-.16149 1.155-.24223 1.75-.24223s1.19.08074 1.75.24223c1.3388-.93302 1.925-.73565 1.925-.73565C11.0775 3.95635 10.8325 4.692 10.7625 4.87143 11.2087 5.37382 11.48 6.01079 11.48 6.80026c0 2.7542-1.63625 3.36424-3.19375 3.54364C8.54 10.5682 8.75875 10.9988 8.75875 11.6717 8.75875 12.6316 8.75 13.4032 8.75 13.6454 8.75 13.8338 8.88125 14.0581 9.23125 13.9863 11.9963 13.0353 14 10.3439 14 7.17706 14 3.21173 10.8675.0 7 0z" fill="#73737d"/></svg></a><span class=hidden>https://github.com/etf1</span>
<a href=https://tech.tf1.fr/index.xml><svg class="social-icon-image" style="width:1em;height:1em;vertical-align:middle;fill:currentColor;overflow:hidden" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M329.142857 768q0 45.714286-32 77.714286t-77.714286 32-77.714285-32-32-77.714286 32-77.714286 77.714285-32 77.714286 32 32 77.714286zm292.571429 70.285714q1.142857 16-9.714286 27.428572-10.285714 12-26.857143 12H508q-14.285714.0-24.571429-9.428572T472 844.571429q-12.571429-130.857143-105.428571-223.714286T142.857143 515.428571Q128.571429 514.285714 119.142857 504T109.714286 479.428571V402.285714q0-16.571429 12-26.857143 9.714286-9.714286 24.571428-9.714285h2.857143q91.428571 7.428571 174.857143 46T472 515.428571q65.142857 64.571429 103.714286 148t46 174.857143zm292.571428 1.142857Q915.428571 854.857142 904 866.285714q-10.285714 11.428571-26.285714 11.428572H796q-14.857143.0-25.428571-10t-11.142858-24.285715Q752.571428 720.571428 701.714286 610T569.428571 418t-192-132.285714T144 227.428571q-14.285714-.571429-24.285714-11.142857t-10-24.857143V109.714286q0-16 11.428571-26.285715 10.285714-10.285714 25.142857-10.285714H148q149.714286 7.428571 286.571429 68.571429t243.142857 168q106.857143 106.285714 168 243.142857t68.571428 286.571428z"/></svg></a><span class=hidden>https://tech.tf1.fr/index.xml</span></div></div></div></div></div><script src=/js/prism.js></script></body></html>